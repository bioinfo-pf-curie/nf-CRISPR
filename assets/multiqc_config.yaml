#
# HPV config for MultiQC
#
#################################################################

title: HPV Genotyping 
subtitle: Institut Curie NGS/bioinformatics platform
intro_text: >
   This report has been generated by the HPV analysis pipeline.
custom_logo_title: Institut Curie
skip_generalstats: true

read_count_multiplier: 0.000001
read_count_prefix: 'M'
read_count_desc: 'millions'

custom_data:
    ctrl_stats:
        file_format: 'tsv'
        section_name: 'Capture Controls'
        description: ' on known genomic regions.'
        plot_type: 'bargraph'
        pconfig:
            namespace: 'ctrlstats'
            title: 'Controls'
            id: 'ctrlstats'
            cpswitch_c_active: false

    hpv_stats:
        file_format: 'tsv'
        section_name: 'HPV Genotyping'
        description: ' from available HPV strains. Sequencing reads were aligned on the complete HPV database.'
        plot_type: 'bargraph'
        pconfig:
            namespace: 'hpvstats'
            title: 'HPV Genotypes'
            id: 'hpvstats'
            cpswitch_c_active: false

    hpv_loc_stats:
        file_format: 'csv'
        section_name: 'HPV Local Alignment'
        description: ' from detected subtypes.'
        plot_type: 'table'
        pconfig:
            namespace: 'hpvlocstats'
            title: 'Aligned reads on HPV genome(s)'
            id: 'hpvlocstats'
            scale: 'RdYlBu'
            format: '{:,.2f}'
            save_file: true

    table_filtered:
        file_format: 'csv'
        section_name: 'Summary'
        description: ' of detected subtypes.'
        plot_type: 'table'
        pconfig:
            namespace: 'table_filtered'
            title: 'Summary'
            id: 'table_filtered'
            save_file: true
            no_beeswarm: true
            col1_header: 'IDs'
        headers:
            sample:
              title: 'Sample Name'
              scale: false
              format: '{:.0f}'
              placement: 1000
            genotype:
              title: 'HPV Genotype'
              scale: false
              format: '{:.0f}'
              placement: 2000
            feature:
              title: 'Feature'
              description: '5/3 end of reads'
              scale: false
              format: '{:.0f}'
              placement: 3000
            score:
              title: 'Score'
              min: 0
              max: 10
              scale: 'YlOrBr'
              format: '{:.0f}'
              placement: 4000
            position:
              title: 'HPV Position'
              scale: false
              format: '{:.0f}'
              placement: 5000
            chr:
              title: 'Chromosome'
              scale: false
              format: '{:.0f}'
              placement: 6000
            chr_position:
              title: 'Position'
              scale: false
              format: '{:.0f}'
              placement: 7000
            match:
              title: 'Match'
              scale: false
              format: '{:.0f}'
              placement: 8000
            counts:
              title: 'Counts'
              scale: 'YlOrBr'
              format: '{:.0f}'
              placement: 9000

sp:
   ctrl_stats:
      fn: '*ctrl.stats'
   hpv_stats:
      fn: '*genotyping.stats'
   hpv_loc_stats:
      fn: '*coverage.stats'
   table_filtered:
      fn: '*table_filtered.csv'

module_order:
  - fastqc

report_section_order:
  ctrl_stats:
    order: -100
  hpv_stats:
    order: -200
  hpv_loc_stats:
    order: -300
  software_versions:
    order: -1001
  summary:
    order: -1100

table_columns_visible:
    FastQC:
        percent_duplicates: False
    hpvlocstats:
        bam: False
        max_cov: False


table_cond_formatting_rules:
    score:
        pass:
            - gt: 8
        warn:
            - lt: 8
        fail:
            - lt: 4

custom_plot_config:
    # Show the percentages tab by default for the FastQC sequence counts plot
    fastqc_sequence_counts_plot:
        cpswitch_c_active: False


plots_force_interactive: True

fn_clean_exts:
    - '_ctrl.stats'
    - '_HPVgenotyping.stats'
    - '_covmatrix.mqc'
    - '_bkp.mqc'
    - '_table_filtered.csv'
